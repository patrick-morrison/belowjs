<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BelowJS - Dark Minimal Viewer</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŒŠ</text></svg>">
    
    <!-- BelowJS Production Build -->
    <link rel="stylesheet" href="/dist/belowjs.css">
    
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #0f172a;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
    </style>
</head>
<body>

    <script type="module">
        import { ModelViewer } from '/dist/belowjs.es.js';

        // Single default model
        const models = {
          'sesa': {
            url: '../basic-viewer/models/sesa.glb',
            name: 'Sesa',
            initialPositions: {
              desktop: {
                camera: { x: 18.93, y: 11.572, z: 52.508 },
                target: { x: -1.613, y: -8.088, z: 4.822 }
              },
              vr: {
                dolly: { x: 0, y: 2, z: 15 },
                rotation: { x: 0, y: 0, z: 0 }
              }
            }
          }
        };

        // Create viewer container
        const viewerContainer = document.createElement('div');
        viewerContainer.style.position = 'fixed';
        viewerContainer.style.inset = '0';
        viewerContainer.style.zIndex = '0';
        document.body.appendChild(viewerContainer);

        // Dark minimal viewer: only mode switch and VR toggle
        // Shows the Sesa model by default and supports drag-and-drop GLB loading
        const viewer = new ModelViewer(viewerContainer, {
          models: models,
          enableDiveSystem: true,
          enableVR: true,
          enableVRAudio: false,
          enableFullscreen: false,
          showInfo: false,
          showStatus: false,
          showLoadingIndicator: false,
          viewerConfig: {
            scene: {
              background: { type: 'color', value: '#0f172a' }
            }
          }
        });

        // Allow users to drag and drop a GLB file onto the viewer
        window.addEventListener('dragover', (e) => {
          e.preventDefault();
        });

        window.addEventListener('drop', async (e) => {
          e.preventDefault();
          const file = e.dataTransfer.files[0];
          if (!file) return;
          const url = URL.createObjectURL(file);
          try {
            // Replace the default model with the dropped one
            viewer.belowViewer.clearModels();
            await viewer.belowViewer.loadModel(url, { autoFrame: true });
          } catch (err) {
            console.error('Failed to load dropped model:', err);
          } finally {
            URL.revokeObjectURL(url);
          }
        });
    </script>
</body>
</html>
